---
title:  "MySQL Schema 与数据类型优化"
tags: MySQL
---

MySQL 数据库的设计
<!--more-->

#### 选择最优的数据类型

> 更小的通常更好：更小的数据类型占用更少的磁盘、内存和 CPU 缓存，处理时需要的 CPU 周期也更少

> 简单就好：简单的数据类型需要更少的 CPU 周期，例如，整型比字符串操作代价更低，使用MySQL内建的类型而不是使用字符串来存储时间，对于IP地址应该使用整型存储

> 尽量避免使用NULL：可为NULL的列会使用更多的存储空间，在MySQL里也需要特殊处理，当可为NULL的列被索引时，每个索引记录需要一个额外的字节，例外的是InnoDB使用单独的为(bit)存储NULL值，对于稀疏数据有很好的空间效率

> DATETIME和TIMESTAMP列都可以存储相同类型的数据：时间和日期，进去到秒，然而TIMESTAMP只使用DATETIME一般的存储空间，并且会根据时区变化，具有特殊的自动更新能力，在UTC时区下TIMESTAMP支持的范围是1970-01-01 00:00:01到2038-01-19 03:14:07

#### 基本数据类型

> 整数类型：TINYINT，SMALLINT，MEDIUMINT，INT，BIGINT，分别使用8,16,24,32,64位存储空间，取值范围是-2<sup>(N-1)</sup>到2<sup>(N-1)</sup> - 1,对于存储和计算来说，INT(1)和INT(10)是相同的。

> 实数类型：FLOAT使用4个字节存储，DOUBLE使用8个字节存储，对小数进行精确计算时使用DECIMAL。

> 字符串类型：VARCHAR 类型用于存储可变长字符串，比定长类型节省空间，如果MySQL表使用ROW_FORMAT=FIXED创建的话，每一行都会使用定长存储。VARCHAT需要使用1或2个额外字节记录字符串的长度，如果最大长度小于或等于255字节，使用1个字节，否则使用2个字节。例如：VARCHAR(10)的列需要11个字节的存储空间，VARCHAR(1000)的列需要1002个字节。

> 字符串类型：CHAR 


